const imgEl = document.getElementById("frame") as HTMLImageElement; const fpsEl = document.getElementById("fps") as HTMLElement; const resEl = document.getElementById("res") as HTMLElement; const placeholder = `data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAQCAYAAABt6Z0kAAAACXBIWXMAAAsSAAALEgHS3X78AAAAIklEQVR4nO3OMQEAIAwEsWb8F5yG0C4oY8aC+gQAAAAAAAAAANwGu+gG2J6r2gAAAABJRU5ErkJggg==` as const; function update(imgSrc: string){ imgEl.src = imgSrc; } function startFps(){ let last = performance.now(); let frames = 0; function tick(){ const now = performance.now(); frames++; if (now - last >= 1000){ fpsEl.textContent = String(frames); frames = 0; last = now; const w = imgEl.naturalWidth || imgEl.width; const h = imgEl.naturalHeight || imgEl.height; if (w && h) resEl.textContent = `${w}x${h}`; } requestAnimationFrame(tick); } requestAnimationFrame(tick); } update(placeholder); startFps();
